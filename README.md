# OpenCode 中文汉化管理工具

> 🎉 让 OpenCode AI 编码助手更友好！

---

## 📖 简介

OpenCode 中文汉化工具是一套完整的 PowerShell 脚本集合，用于将 OpenCode 项目汉化为中文版本。

---

## ✨ 核心功能

### 核心功能

| 功能 | 描述 |
|------|------|
| **一键汉化** | 自动拉取、汉化、编译 OpenCode |
| **模块化汉化** | 支持 30+ 个汉化模块的独立管理 |
| **版本管理** | 检测更新、拉取最新代码 |
| **备份恢复** | 完整备份和选择性恢复 |
| **版本验证** | 验证汉化结果覆盖率 |

### 汉化范围

- 🎯 命令面板（会话、模型、智能体切换等）
- 💬 对话框（智能体选择、会话列表）
- 📊 侧边栏（上下文、MCP 状态）
- 🔝 顶部栏（子智能体导航）
- 🛠️ 权限系统（文件操作权限请求）
- 💡 提示和帮助（70+ 条操作提示）

---

## 📁 目录结构

```
OpenCodeChineseTranslation/
├── .gitignore           # Git 忽略文件
├── README.md           # 项目说明
├── LICENSE             # MIT 许可证
├── scripts/            # 所有 PowerShell 脚本
│   ├── opencode.ps1    # 主管理脚本
│   ├── backup.ps1       # 备份脚本
│   └── restore.ps1      # 恢复脚本
├── i18n/              # 汉化配置
│   ├── config.json      # 主配置（多文件版）
│   ├── legacy/         # 旧的单文件版（备份）
│   ├── dialogs/        # 对话框汉化（16个）
│   ├── routes/          # 路由汉化（3个）
│   ├── components/      # 组件汉化（6个）
│   └── common/         # 通用汉化（5个）
├── dist/               # 编译产物（Git 忽略）
└── docs/               # 文档（可选）
```

---

## 🚀 快速开始

### 克隆仓库

```bash
git clone https://github.com/1186258278/OpenCodeChineseTranslation.git
cd OpenCodeChineseTranslation
```

### 一键汉化+部署

```bash
.\scripts\opencode.ps1
```

选择 `[1] 一键汉化+部署`，等待完成即可。

---

## 📋 主菜单功能

运行 `.\scripts\opencode.ps1` 后显示主菜单：

| 选项 | 功能 |
|------|------|
| **[1]** | 一键汉化+部署（推荐） |
| **[2]** | 验证汉化结果 |
| **[3]** | 汉化调试工具 |
| **[4]** | 检测版本更新 |
| **[5]** | 备份当前版本 |
| **[9]** | 高级菜单 |

### 高级菜单功能

| 选项 | 功能 |
|------|------|
| **[1]** | 拉取最新代码 |
| **[2]** | 应用汉化补丁 |
| **[3]** | 编译程序 |
| **[4]** | 检测版本更新 |
| **[5]** | 备份源码和编译产物（支持自定义名称） |
| **[6]** | 从备份恢复 |
| **[R]** | 源码恢复（强制重置到最新版） |
| **[7]** | 恢复原始文件 |
| **[8]** | 打开输出目录 |
| **[9]** | 替换全局版本 |

---

## 💻 系统要求

| 工具 | 版本 | 安装 |
|------|------|------|
| **PowerShell** | 5.1+ | Windows 自带 |
| **Git** | 2.25+ | [下载](https://git-scm.com/) |
| **Bun** | 1.0+ | `npm install -g bun` |
| **Node.js** | 18+ | Bun 自带 |

---

## 📖 使用说明

### 主脚本功能

运行 `.\scripts\opencode.ps1` 后显示主菜单：

| 选项 | 功能 |
|------|------|
| **[1]** | 一键汉化+部署（推荐） |
| **[2]** | 验证汉化结果 |
| **[3]** | 汉化调试工具 |
| **[4]** | 检测版本更新 |
| **[5]** | 备份当前版本 |
| **[9]** | 高级菜单 |

### 高级菜单功能

| 选项 | 功能 |
|------|------|
| **[1]** | 拉取最新代码 |
| **[2]** | 应用汉化补丁 |
| **[3]** | 编译程序 |
| **[4]** | 检测版本更新 |
| **[5]** | 备份源码和编译产物（支持自定义名称） |
| **[6]** | 从备份恢复 |
| **[R]** | 源码恢复（强制重置到最新版） |
| **[7]** | 恢复原始文件 |
| **[8]** | 打开输出目录 |
| **[9]** | 替换全局版本 |

---

## 🛠️ 常见问题

### 常见问题

| 问题 | 解决方法 |
|------|----------|
| 执行策略错误 | `Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass` |
| 编译失败 | 检查 Bun 版本，运行 `[3] 汉化调试工具` |
| 汉化未生效 | 运行 `[2] 验证汉化结果` 查看详情 |
| 源码损坏 | 运行 `[R] 源码恢复` |

---

## 🌟 汉化配置说明

### 模块化结构（推荐）

新版本使用模块化的多文件结构：

```
i18n/
├── config.json       # 主配置（模块索引）
├── dialogs/         # 16 个对话框汉化文件
├── routes/          # 3 个路由汉化文件
├── components/      # 6 个组件汉化文件
└── common/          # 5 个通用汉化文件
```

### 添加/修改汉化

1. **添加新模块**：在对应目录创建 JSON 文件
2. **修改现有模块**：编辑对应的 JSON 文件
3. **更新索引**：在 `config.json` 中添加模块路径到对应分类

示例：
```json
{
  "modules": {
    "dialogs": [
      "dialogs/dialog-new-feature.json"
    ]
  }
}
```

---

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

---

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

1. 发现 Bug → 提交 Issue
2. 新功能建议 → 提交 Issue
3. 汉化改进 → 提交 Pull Request
4. 脚本优化 → 提交 Pull Request

---

## 📜 版本历史

- **v4.0** - 模块化汉化结构，支持30+独立模块
- **v3.1** - 补充遗漏的汉化点
- **v3.0** - 优化脚本性能和错误处理
- **v2.0** - 添加高级菜单和备份功能
- **v1.0** - 初始版本

---

## 🔗 相关链接

- [OpenCode 官方仓库](https://github.com/anomalyco/opencode)
- [OpenCode 中文文档](https://opencode.ai/docs)

---

## ⭐ Star 如果这个项目对您有帮助，请给一个 Star！
