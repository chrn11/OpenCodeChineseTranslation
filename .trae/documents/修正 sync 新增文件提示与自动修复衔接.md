## 结论（为什么一直提示“新增文件要汉化”）
- 这不是“以前翻过又丢了”的必然错误，更常见是：官方源码在更新后新增/移动了 TSX 文件，而语言包里还没有对应 `file: "src/..."` 的配置条目，所以 sync 会提示。
- sync 命令本身**只做对比与提示**，不会调用 AI、不会写入汉化包；你看到的那一串 `src/cli/cmd/tui/context/*.tsx` 在当前语言包里确实没有对应配置（例如 `src/cli/cmd/tui/context/theme.tsx` 在 opencode-i18n 里找不到）。
- 另外，sync 目前扫描的是 `packages/opencode/src` 下所有 tsx/jsx（不仅是 TUI），所以它的“新增文件”口径比“真正需要汉化的文件”更宽，容易让人感觉“怎么每次都有”。

## 我将做的改动（让提示变得准确 + 一键修复衔接上）
## 1) sync 的新增文件检测改为“可汉化的新增文件”
- 把 sync 里 `checkNewFiles()` 的口径从“src 全量文件”改为：
  - 仅 TUI：`src/cli/cmd/tui/**/*.tsx`
  - 且通过 `I18n.hasTranslatableText()` 过滤（无 UI 文本的不算）
  - 且尊重 `skip-files.json`（被跳过的不再反复提示）

## 2) sync 的提示语改为引导一键修复
- 把结尾的提示从 `opencodenpm verify -d` 改为更贴合你的工作流：
  - `提示: 运行 opencodenpm fix`（先修复到语言包，再应用到源码并编译）
  - 同时保留 `verify -d` 作为“查看细节”的二级提示

## 3) 增加 sync 的可选自动修复开关（可选）
- 给 `opencodenpm sync` 增加 `--auto-fix`：更新完如果发现“需要汉化的新增文件”，就直接调用 fix 流程。
- 默认不自动跑，避免每次同步都触发 AI；你想全自动时再加参数。

## 4) 菜单体验同步调整
- 把“同步官方”后的推荐下一步从 apply 调整为 fix（因为你的规则是：先修复语言包，再应用/编译）。

## 验证方式
- 用一组已知新增文件的场景运行 sync：
  - 确认输出数量显著减少（只剩真正可汉化的新增文件）
  - 确认不再重复提示已在 skip 列表/无 UI 文本的文件
- 跑 scripts 的 `node --test` 确保脚本不回归。

我会按 1→4 实现并验证，通过后你再 sync 时看到的提示就会非常“对口径”，并且能一键修复到语言包再应用编译。